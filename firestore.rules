rules_version = '2';
service cloud.firestore {
  match /databases/{db}/documents {
    // carts 컬렉션 (게스트 장바구니)
    match /carts/{cartId} {
      allow read, write: if false; // Cloud Functions만 접근
    }
    
    // userCarts 컬렉션 (회원 장바구니)
    match /userCarts/{userId} {
      allow read, write: if false; // Cloud Functions만 접근
    }
    
    // products 컬렉션
    match /products/{productId} {
      allow read: if true;  // 읽기 허용
      allow write: if false; // 쓰기는 Cloud Functions만
    }
    
    // analytics 컬렉션 (방문자 통계)
    match /analytics/{documentId} {
      allow read, write: if true; // 모든 사용자가 읽기/쓰기 가능
    }
    
    // 다른 컬렉션들
    match /{document=**} {
      allow read, write: if true;
    }
  }
}

